{"remainingRequest":"/Users/bm/github-profile/vue-manage-system-master/node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js!/Users/bm/github-profile/vue-manage-system-master/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!/Users/bm/github-profile/vue-manage-system-master/node_modules/_vue-loader@15.8.3@vue-loader/lib/index.js??vue-loader-options!/Users/bm/github-profile/vue-manage-system-master/src/components/page/Dashboard.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/bm/github-profile/vue-manage-system-master/src/components/page/Dashboard.vue","mtime":1579166331934},{"path":"/Users/bm/github-profile/vue-manage-system-master/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":1579166323930},{"path":"/Users/bm/github-profile/vue-manage-system-master/node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js","mtime":1579166323365},{"path":"/Users/bm/github-profile/vue-manage-system-master/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":1579166323930},{"path":"/Users/bm/github-profile/vue-manage-system-master/node_modules/_vue-loader@15.8.3@vue-loader/lib/index.js","mtime":1579166331242}],"contextDependencies":[],"result":["import \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/Users/bm/github-profile/vue-manage-system-master/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport \"core-js/modules/es6.function.name\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Schart from 'vue-schart';\nimport Dashboard from \"./Dashboard.js\";\nimport bus from \"../common/bus\";\nexport default {\n  name: 'dashboard',\n  data: function data() {\n    return {\n      userInfo: JSON.parse(localStorage.getItem('ms_username')),\n      name: JSON.parse(localStorage.getItem('ms_username')).nickname,\n      todoList: [],\n      data: [{\n        name: '2018/09/04',\n        value: 1083\n      }, {\n        name: '2018/09/05',\n        value: 941\n      }, {\n        name: '2018/09/06',\n        value: 1139\n      }, {\n        name: '2018/09/07',\n        value: 816\n      }, {\n        name: '2018/09/08',\n        value: 327\n      }, {\n        name: '2018/09/09',\n        value: 228\n      }, {\n        name: '2018/09/10',\n        value: 1065\n      }],\n      options: {\n        type: 'bar',\n        title: {\n          text: '最近一周各品类销售图'\n        },\n        xRorate: 25,\n        labels: ['周一', '周二', '周三', '周四', '周五'],\n        datasets: [{\n          label: '家电',\n          data: [234, 278, 270, 190, 230]\n        }, {\n          label: '百货',\n          data: [164, 178, 190, 135, 160]\n        }, {\n          label: '食品',\n          data: [144, 198, 150, 235, 120]\n        }]\n      },\n      options2: {\n        type: 'line',\n        title: {\n          text: '最近几个月各品类销售趋势图'\n        },\n        labels: ['6月', '7月', '8月', '9月', '10月'],\n        datasets: [{\n          label: '家电',\n          data: [234, 278, 270, 190, 230]\n        }, {\n          label: '百货',\n          data: [164, 178, 150, 135, 160]\n        }, {\n          label: '食品',\n          data: [74, 118, 200, 235, 90]\n        }]\n      }\n    };\n  },\n  components: {\n    Schart: Schart\n  },\n  computed: {\n    role: function role() {\n      return this.name === 'admin' ? '超级管理员' : '普通用户';\n    }\n  },\n  created: function created() {\n    this.queryTodoList();\n  },\n  activated: function activated() {\n    // this.handleListener();\n    this.queryTodoList();\n  },\n  // deactivated() {\n  //     window.removeEventListener('resize', this.renderChart);\n  //     bus.$off('collapse', this.handleBus);\n  // },\n  methods: {\n    queryTodoList: function () {\n      var _queryTodoList = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        var datas, _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, item;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return Dashboard.queryTodoList({});\n\n              case 2:\n                datas = _context.sent;\n\n                if (!(datas.success == 1)) {\n                  _context.next = 25;\n                  break;\n                }\n\n                //  console.log( datas.data.datas)\n                _iteratorNormalCompletion = true;\n                _didIteratorError = false;\n                _iteratorError = undefined;\n                _context.prev = 7;\n\n                for (_iterator = datas.datas[Symbol.iterator](); !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n                  item = _step.value;\n                  item.editStatus = false;\n                  item.status = item.status == 1 ? true : false;\n                }\n\n                _context.next = 15;\n                break;\n\n              case 11:\n                _context.prev = 11;\n                _context.t0 = _context[\"catch\"](7);\n                _didIteratorError = true;\n                _iteratorError = _context.t0;\n\n              case 15:\n                _context.prev = 15;\n                _context.prev = 16;\n\n                if (!_iteratorNormalCompletion && _iterator.return != null) {\n                  _iterator.return();\n                }\n\n              case 18:\n                _context.prev = 18;\n\n                if (!_didIteratorError) {\n                  _context.next = 21;\n                  break;\n                }\n\n                throw _iteratorError;\n\n              case 21:\n                return _context.finish(18);\n\n              case 22:\n                return _context.finish(15);\n\n              case 23:\n                this.todoList = datas.datas;\n                this.$forceUpdate();\n\n              case 25:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[7, 11, 15, 23], [16,, 18, 22]]);\n      }));\n\n      function queryTodoList() {\n        return _queryTodoList.apply(this, arguments);\n      }\n\n      return queryTodoList;\n    }(),\n    changeDate: function changeDate() {\n      var now = new Date().getTime();\n      this.data.forEach(function (item, index) {\n        var date = new Date(now - (6 - index) * 86400000);\n        item.name = \"\".concat(date.getFullYear(), \"/\").concat(date.getMonth() + 1, \"/\").concat(date.getDate());\n      });\n    },\n    todoListAdd: function todoListAdd() {\n      if (this.todoList[0] && this.todoList[0].editStatus) {\n        return;\n      }\n\n      var item = {\n        title: '',\n        editStatus: true\n      };\n      this.todoList.unshift(item);\n    },\n    todoListEdit: function () {\n      var _todoListEdit = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee2(scope) {\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                this.todoList[scope.$index].editStatus = true;\n                this.$forceUpdate();\n\n              case 2:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function todoListEdit(_x) {\n        return _todoListEdit.apply(this, arguments);\n      }\n\n      return todoListEdit;\n    }(),\n    todoListDel: function () {\n      var _todoListDel = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee3(scope) {\n        var datas;\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.prev = 0;\n                _context3.next = 3;\n                return this.$confirm('确定要删除吗？', '提示');\n\n              case 3:\n                _context3.next = 5;\n                return Dashboard.delTodoList(scope.row.id);\n\n              case 5:\n                datas = _context3.sent;\n                this.queryTodoList();\n                _context3.next = 12;\n                break;\n\n              case 9:\n                _context3.prev = 9;\n                _context3.t0 = _context3[\"catch\"](0);\n\n                (function (err) {});\n\n              case 12:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this, [[0, 9]]);\n      }));\n\n      function todoListDel(_x2) {\n        return _todoListDel.apply(this, arguments);\n      }\n\n      return todoListDel;\n    }(),\n    todoListFinish: function () {\n      var _todoListFinish = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee4(scope) {\n        var datas, _datas;\n\n        return regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                this.todoList[scope.$index].editStatus = false;\n\n                if (!scope.row.id) {\n                  _context4.next = 8;\n                  break;\n                }\n\n                _context4.next = 4;\n                return Dashboard.editTodoList(scope.row);\n\n              case 4:\n                datas = _context4.sent;\n\n                if (datas.success == 1) {\n                  this.queryTodoList();\n                }\n\n                _context4.next = 12;\n                break;\n\n              case 8:\n                _context4.next = 10;\n                return Dashboard.addTodoList(scope.row);\n\n              case 10:\n                _datas = _context4.sent;\n\n                if (_datas.success == 1) {\n                  this.queryTodoList();\n                }\n\n              case 12:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function todoListFinish(_x3) {\n        return _todoListFinish.apply(this, arguments);\n      }\n\n      return todoListFinish;\n    }() // handleListener() {\n    //     bus.$on('collapse', this.handleBus);\n    //     // 调用renderChart方法对图表进行重新渲染\n    //     window.addEventListener('resize', this.renderChart);\n    // },\n    // handleBus(msg) {\n    //     setTimeout(() => {\n    //         this.renderChart();\n    //     }, 200);\n    // },\n    // renderChart() {\n    //     this.$refs.bar.renderChart();\n    //     this.$refs.line.renderChart();\n    // }\n\n  }\n};",{"version":3,"sources":["Dashboard.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n    <div>\r\n        <el-row :gutter=\"20\">\r\n            <el-col :span=\"8\">\r\n                <el-card shadow=\"hover\" class=\"mgb20\" style=\"height:252px;\">\r\n                    <div class=\"user-info\">\r\n                        <img src=\"../../assets/img/img.jpg\" class=\"user-avator\" alt />\r\n                        <div class=\"user-info-cont\">\r\n                            <div class=\"user-info-name\">{{name}}</div>\r\n                            <div>{{role}}</div>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"user-info-list\">\r\n                        上次登录时间：\r\n                        <span>{{userInfo.loginTime}}</span>\r\n                    </div>\r\n                    <div class=\"user-info-list\">\r\n                        上次登录地点：\r\n                        <span>{{userInfo.address}}</span>\r\n                    </div>\r\n                </el-card>\r\n                <el-card shadow=\"hover\" style=\"height:252px;\">\r\n                    <div slot=\"header\" class=\"clearfix\">\r\n                        <span>语言详情</span>\r\n                    </div>Vue\r\n                    <el-progress :percentage=\"71.3\" color=\"#42b983\"></el-progress>JavaScript\r\n                    <el-progress :percentage=\"24.1\" color=\"#f1e05a\"></el-progress>CSS\r\n                    <el-progress :percentage=\"13.7\"></el-progress>HTML\r\n                    <el-progress :percentage=\"5.9\" color=\"#f56c6c\"></el-progress>\r\n                </el-card>\r\n            </el-col>\r\n            <el-col :span=\"16\">\r\n                <el-row :gutter=\"20\" class=\"mgb20\">\r\n                    <el-col :span=\"8\">\r\n                        <el-card shadow=\"hover\" :body-style=\"{padding: '0px'}\">\r\n                            <div class=\"grid-content grid-con-1\">\r\n                                <i class=\"el-icon-lx-people grid-con-icon\"></i>\r\n                                <div class=\"grid-cont-right\">\r\n                                    <div class=\"grid-num\">1234</div>\r\n                                    <div>用户访问量</div>\r\n                                </div>\r\n                            </div>\r\n                        </el-card>\r\n                    </el-col>\r\n                    <el-col :span=\"8\">\r\n                        <el-card shadow=\"hover\" :body-style=\"{padding: '0px'}\">\r\n                            <div class=\"grid-content grid-con-2\">\r\n                                <i class=\"el-icon-lx-notice grid-con-icon\"></i>\r\n                                <div class=\"grid-cont-right\">\r\n                                    <div class=\"grid-num\">321</div>\r\n                                    <div>文章数量</div>\r\n                                </div>\r\n                            </div>\r\n                        </el-card>\r\n                    </el-col>\r\n                    <el-col :span=\"8\">\r\n                        <el-card shadow=\"hover\" :body-style=\"{padding: '0px'}\">\r\n                            <div class=\"grid-content grid-con-3\">\r\n                                <i class=\"el-icon-lx-goods grid-con-icon\"></i>\r\n                                <div class=\"grid-cont-right\">\r\n                                    <div class=\"grid-num\">5000</div>\r\n                                    <div>数量</div>\r\n                                </div>\r\n                            </div>\r\n                        </el-card>\r\n                    </el-col>\r\n                </el-row>\r\n                <el-card shadow=\"hover\" style=\"height:403px;\">\r\n                    <div slot=\"header\" class=\"clearfix\">\r\n                        <span>待办事项</span>\r\n                        <el-button\r\n                            @click=\"todoListAdd\"\r\n                            style=\"float: right; padding: 3px 0\"\r\n                            type=\"text\"\r\n                        >添加</el-button>\r\n                    </div>\r\n                    <el-table :show-header=\"false\" :data=\"todoList\" style=\"width:100%;\">\r\n                        <el-table-column width=\"40\">\r\n                            <template slot-scope=\"scope\">\r\n                                <el-checkbox\r\n                                    v-if=\"!scope.row.editStatus\"\r\n                                    v-model=\"scope.row.status\"\r\n                                    @change=\"todoListFinish(scope)\"\r\n                                ></el-checkbox>\r\n                            </template>\r\n                        </el-table-column>\r\n                        <el-table-column>\r\n                            <template slot-scope=\"scope\">\r\n                                <div v-if=\"scope.row.editStatus\" class=\"todo-item\">\r\n                                    <el-col :span=\"20\">\r\n                                        <el-input placeholder=\"请输入待办事项\" v-model=\"scope.row.title\"></el-input>\r\n                                    </el-col>\r\n                                    <el-button @click=\"todoListFinish(scope)\" type=\"primary\">完成</el-button>\r\n                                </div>\r\n                                <div\r\n                                    v-else\r\n                                    class=\"todo-item\"\r\n                                    :class=\"{'todo-item-del': scope.row.status}\"\r\n                                >{{scope.row.title}}</div>\r\n                            </template>\r\n                        </el-table-column>\r\n                        <el-table-column width=\"60\">\r\n                            <template slot-scope=\"scope\">\r\n                                <i v-if=\"!scope.row.status\" @click=\"todoListEdit(scope)\" class=\"el-icon-edit\"></i>\r\n                                <i @click=\"todoListDel(scope)\" class=\"el-icon-delete\"></i>\r\n                            </template>\r\n                        </el-table-column>\r\n                    </el-table>\r\n                </el-card>\r\n            </el-col>\r\n        </el-row>\r\n        <el-row :gutter=\"20\">\r\n            <el-col :span=\"12\">\r\n                <el-card shadow=\"hover\">\r\n                    <schart ref=\"bar\" class=\"schart\" canvasId=\"bar\" :options=\"options\"></schart>\r\n                </el-card>\r\n            </el-col>\r\n            <el-col :span=\"12\">\r\n                <el-card shadow=\"hover\">\r\n                    <schart ref=\"line\" class=\"schart\" canvasId=\"line\" :options=\"options2\"></schart>\r\n                </el-card>\r\n            </el-col>\r\n        </el-row>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport Schart from 'vue-schart';\r\nimport  Dashboard from './Dashboard.js'\r\nimport bus from '../common/bus';\r\nexport default {\r\n    name: 'dashboard',\r\n    data() {\r\n        return {\r\n            userInfo:JSON.parse(localStorage.getItem('ms_username')),\r\n            name: JSON.parse(localStorage.getItem('ms_username')).nickname,\r\n            todoList: [],\r\n            data: [\r\n                {\r\n                    name: '2018/09/04',\r\n                    value: 1083\r\n                },\r\n                {\r\n                    name: '2018/09/05',\r\n                    value: 941\r\n                },\r\n                {\r\n                    name: '2018/09/06',\r\n                    value: 1139\r\n                },\r\n                {\r\n                    name: '2018/09/07',\r\n                    value: 816\r\n                },\r\n                {\r\n                    name: '2018/09/08',\r\n                    value: 327\r\n                },\r\n                {\r\n                    name: '2018/09/09',\r\n                    value: 228\r\n                },\r\n                {\r\n                    name: '2018/09/10',\r\n                    value: 1065\r\n                }\r\n            ],\r\n            options: {\r\n                type: 'bar',\r\n                title: {\r\n                    text: '最近一周各品类销售图'\r\n                },\r\n                xRorate: 25,\r\n                labels: ['周一', '周二', '周三', '周四', '周五'],\r\n                datasets: [\r\n                    {\r\n                        label: '家电',\r\n                        data: [234, 278, 270, 190, 230]\r\n                    },\r\n                    {\r\n                        label: '百货',\r\n                        data: [164, 178, 190, 135, 160]\r\n                    },\r\n                    {\r\n                        label: '食品',\r\n                        data: [144, 198, 150, 235, 120]\r\n                    }\r\n                ]\r\n            },\r\n            options2: {\r\n                type: 'line',\r\n                title: {\r\n                    text: '最近几个月各品类销售趋势图'\r\n                },\r\n                labels: ['6月', '7月', '8月', '9月', '10月'],\r\n                datasets: [\r\n                    {\r\n                        label: '家电',\r\n                        data: [234, 278, 270, 190, 230]\r\n                    },\r\n                    {\r\n                        label: '百货',\r\n                        data: [164, 178, 150, 135, 160]\r\n                    },\r\n                    {\r\n                        label: '食品',\r\n                        data: [74, 118, 200, 235, 90]\r\n                    }\r\n                ]\r\n            }\r\n        };\r\n    },\r\n    components: {\r\n        Schart\r\n    },\r\n    computed: {\r\n        role() {\r\n            return this.name === 'admin' ? '超级管理员' : '普通用户';\r\n        }\r\n    },\r\n    created() {\r\n        this.queryTodoList()\r\n    },\r\n    activated() {\r\n        // this.handleListener();\r\n        this.queryTodoList()\r\n    },\r\n    // deactivated() {\r\n    //     window.removeEventListener('resize', this.renderChart);\r\n    //     bus.$off('collapse', this.handleBus);\r\n    // },\r\n    methods: {\r\n        async queryTodoList(){\r\n         let datas=  await Dashboard.queryTodoList({})\r\n         if(datas.success==1){\r\n            //  console.log( datas.data.datas)\r\n             for(let item of datas.datas){\r\n                 item.editStatus=false;\r\n                 item.status= item.status==1?true:false\r\n             }\r\n             \r\n             this.todoList=datas.datas\r\n             this.$forceUpdate()\r\n         }\r\n        },\r\n        changeDate() {\r\n            const now = new Date().getTime();\r\n            this.data.forEach((item, index) => {\r\n                const date = new Date(now - (6 - index) * 86400000);\r\n                item.name = `${date.getFullYear()}/${date.getMonth() + 1}/${date.getDate()}`;\r\n            });\r\n        },\r\n        todoListAdd() {\r\n            if (this.todoList[0]&&this.todoList[0].editStatus) {\r\n                return;\r\n            }\r\n            let item = {\r\n                title: '',\r\n                editStatus: true\r\n            };\r\n            this.todoList.unshift(item);\r\n        },\r\n       async todoListEdit(scope) {\r\n            this.todoList[scope.$index].editStatus = true;\r\n            this.$forceUpdate();\r\n        },\r\n       async todoListDel(scope) {\r\n            try{\r\n                await this.$confirm('确定要删除吗？', '提示');\r\n                let datas=await Dashboard.delTodoList(scope.row.id)\r\n                 this.queryTodoList()\r\n            }catch{(err)=>{\r\n\r\n            }}\r\n        },\r\n       async todoListFinish(scope) {\r\n            this.todoList[scope.$index].editStatus = false;\r\n             if(scope.row.id){\r\n               let datas=await Dashboard.editTodoList(scope.row);\r\n               if(datas.success==1){\r\n                    this.queryTodoList()\r\n               }\r\n            }else{\r\n               let datas=await Dashboard.addTodoList(scope.row);\r\n               if(datas.success==1){\r\n                    this.queryTodoList()\r\n               }\r\n            }\r\n        }\r\n        // handleListener() {\r\n        //     bus.$on('collapse', this.handleBus);\r\n        //     // 调用renderChart方法对图表进行重新渲染\r\n        //     window.addEventListener('resize', this.renderChart);\r\n        // },\r\n        // handleBus(msg) {\r\n        //     setTimeout(() => {\r\n        //         this.renderChart();\r\n        //     }, 200);\r\n        // },\r\n        // renderChart() {\r\n        //     this.$refs.bar.renderChart();\r\n        //     this.$refs.line.renderChart();\r\n        // }\r\n    }\r\n};\r\n</script>\r\n\r\n\r\n<style scoped>\r\n.el-row {\r\n    margin-bottom: 20px;\r\n}\r\n\r\n.grid-content {\r\n    display: flex;\r\n    align-items: center;\r\n    height: 100px;\r\n}\r\n\r\n.grid-cont-right {\r\n    flex: 1;\r\n    text-align: center;\r\n    font-size: 14px;\r\n    color: #999;\r\n}\r\n\r\n.grid-num {\r\n    font-size: 30px;\r\n    font-weight: bold;\r\n}\r\n\r\n.grid-con-icon {\r\n    font-size: 50px;\r\n    width: 100px;\r\n    height: 100px;\r\n    text-align: center;\r\n    line-height: 100px;\r\n    color: #fff;\r\n}\r\n\r\n.grid-con-1 .grid-con-icon {\r\n    background: rgb(45, 140, 240);\r\n}\r\n\r\n.grid-con-1 .grid-num {\r\n    color: rgb(45, 140, 240);\r\n}\r\n\r\n.grid-con-2 .grid-con-icon {\r\n    background: rgb(100, 213, 114);\r\n}\r\n\r\n.grid-con-2 .grid-num {\r\n    color: rgb(45, 140, 240);\r\n}\r\n\r\n.grid-con-3 .grid-con-icon {\r\n    background: rgb(242, 94, 67);\r\n}\r\n\r\n.grid-con-3 .grid-num {\r\n    color: rgb(242, 94, 67);\r\n}\r\n\r\n.user-info {\r\n    display: flex;\r\n    align-items: center;\r\n    padding-bottom: 20px;\r\n    border-bottom: 2px solid #ccc;\r\n    margin-bottom: 20px;\r\n}\r\n\r\n.user-avator {\r\n    width: 120px;\r\n    height: 120px;\r\n    border-radius: 50%;\r\n}\r\n\r\n.user-info-cont {\r\n    padding-left: 50px;\r\n    flex: 1;\r\n    font-size: 14px;\r\n    color: #999;\r\n}\r\n\r\n.user-info-cont div:first-child {\r\n    font-size: 30px;\r\n    color: #222;\r\n}\r\n\r\n.user-info-list {\r\n    font-size: 14px;\r\n    color: #999;\r\n    line-height: 25px;\r\n}\r\n\r\n.user-info-list span {\r\n    margin-left: 70px;\r\n}\r\n\r\n.mgb20 {\r\n    margin-bottom: 20px;\r\n}\r\n\r\n.todo-item {\r\n    font-size: 14px;\r\n}\r\n\r\n.todo-item-del {\r\n    text-decoration: line-through;\r\n    color: #999;\r\n}\r\n\r\n.schart {\r\n    width: 100%;\r\n    height: 300px;\r\n}\r\n</style>\r\n"],"sourceRoot":"src/components/page"}]}