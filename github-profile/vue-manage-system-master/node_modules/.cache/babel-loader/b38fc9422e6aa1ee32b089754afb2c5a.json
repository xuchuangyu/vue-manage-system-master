{"remainingRequest":"/Users/bm/github-profile/vue-manage-system-master/node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js!/Users/bm/github-profile/vue-manage-system-master/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!/Users/bm/github-profile/vue-manage-system-master/node_modules/_vue-loader@15.8.3@vue-loader/lib/index.js??vue-loader-options!/Users/bm/github-profile/vue-manage-system-master/src/components/page/article.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/bm/github-profile/vue-manage-system-master/src/components/page/article.vue","mtime":1579414859482},{"path":"/Users/bm/github-profile/vue-manage-system-master/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":1579166323930},{"path":"/Users/bm/github-profile/vue-manage-system-master/node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js","mtime":1579166323365},{"path":"/Users/bm/github-profile/vue-manage-system-master/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":1579166323930},{"path":"/Users/bm/github-profile/vue-manage-system-master/node_modules/_vue-loader@15.8.3@vue-loader/lib/index.js","mtime":1579166331242}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/Users/bm/github-profile/vue-manage-system-master/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { fetchData } from \"../../api/index\";\nimport article from \"./article\";\nexport default {\n  name: 'basetable',\n  data: function data() {\n    return {\n      query: {\n        title: '',\n        name: '',\n        pageIndex: 1,\n        pageSize: 10\n      },\n      tableData: [],\n      multipleSelection: [],\n      delList: [],\n      editVisible: false,\n      pageTotal: 0,\n      form: {},\n      idx: -1,\n      id: -1\n    };\n  },\n  created: function created() {\n    this.getData();\n    this.getCategoryDate();\n  },\n  activated: function activated() {\n    this.getData();\n    this.getCategoryDate();\n  },\n  methods: {\n    // 获取 easy-mock 的模拟数据\n    getData: function () {\n      var _getData = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        var query, datas;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                console.log(this.query);\n                query = {};\n                Object.assign(query, THIS.query);\n                _context.next = 5;\n                return article.queryList(query);\n\n              case 5:\n                datas = _context.sent;\n                this.tableData = datas.datas.rows;\n                this.pageTotal = datas.datas.count;\n\n              case 8:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function getData() {\n        return _getData.apply(this, arguments);\n      }\n\n      return getData;\n    }(),\n    getCategoryDate: function () {\n      var _getCategoryDate = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee2() {\n        var datas;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return article.queryCategoryList();\n\n              case 2:\n                datas = _context2.sent;\n                this.restaurants = datas.datas;\n\n              case 4:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function getCategoryDate() {\n        return _getCategoryDate.apply(this, arguments);\n      }\n\n      return getCategoryDate;\n    }(),\n    querySearch: function querySearch(queryString, cb) {\n      var restaurants = this.restaurants;\n      var results = queryString ? restaurants.filter(this.createFilter(queryString)) : restaurants; // 调用 callback 返回建议列表的数据\n\n      cb(results);\n    },\n    createFilter: function createFilter(queryString) {\n      return function (restaurant) {\n        return restaurant.name.toLowerCase().indexOf(queryString.toLowerCase()) != -1;\n      };\n    },\n    handleSelect: function handleSelect(item) {\n      this.getData();\n    },\n    // 触发搜索按钮\n    handleSearch: function handleSearch() {\n      this.$set(this.query, 'pageIndex', 1);\n      this.getData();\n    },\n    // 删除操作\n    handleDelete: function handleDelete(index, row) {\n      // 二次确认删除\n      this.$confirm('确定要删除吗？', '提示', {\n        type: 'warning'\n      }).then(\n      /*#__PURE__*/\n      _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee3() {\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return article.del(row.id);\n\n              case 2:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }))).catch(function () {});\n    },\n    // 多选操作\n    handleSelectionChange: function handleSelectionChange(val) {\n      this.multipleSelection = val;\n    },\n    delAllSelection: function delAllSelection() {\n      var length = this.multipleSelection.length;\n      var str = '';\n      this.delList = this.delList.concat(this.multipleSelection);\n\n      for (var i = 0; i < length; i++) {\n        str += this.multipleSelection[i].name + ' ';\n      }\n\n      this.$message.error(\"\\u5220\\u9664\\u4E86\".concat(str));\n      this.multipleSelection = [];\n    },\n    // 编辑操作\n    handleEdit: function handleEdit(index, row) {\n      //  this.idx = index;\n      //    this.form = row;\n      //  this.editVisible = true;\n      this.$router.push({\n        path: '/article-edit',\n        query: {\n          id: row.id\n        }\n      });\n    },\n    // 保存编辑\n    saveEdit: function saveEdit() {\n      this.editVisible = false;\n      this.$message.success(\"\\u4FEE\\u6539\\u7B2C \".concat(this.idx + 1, \" \\u884C\\u6210\\u529F\"));\n      this.$set(this.tableData, this.idx, this.form);\n    },\n    // 分页导航\n    handlePageChange: function handlePageChange(val) {\n      this.$set(this.query, 'pageIndex', val);\n      this.getData();\n    }\n  }\n};",{"version":3,"sources":["article.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiHA,SAAA,SAAA;AACA,OAAA,OAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,WADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,KAAA,EAAA;AACA,QAAA,KAAA,EAAA,EADA;AAEA,QAAA,IAAA,EAAA,EAFA;AAGA,QAAA,SAAA,EAAA,CAHA;AAIA,QAAA,QAAA,EAAA;AAJA,OADA;AAOA,MAAA,SAAA,EAAA,EAPA;AAQA,MAAA,iBAAA,EAAA,EARA;AASA,MAAA,OAAA,EAAA,EATA;AAUA,MAAA,WAAA,EAAA,KAVA;AAWA,MAAA,SAAA,EAAA,CAXA;AAYA,MAAA,IAAA,EAAA,EAZA;AAaA,MAAA,GAAA,EAAA,CAAA,CAbA;AAcA,MAAA,EAAA,EAAA,CAAA;AAdA,KAAA;AAgBA,GAnBA;AAoBA,EAAA,OApBA,qBAoBA;AACA,SAAA,OAAA;AACA,SAAA,eAAA;AACA,GAvBA;AAwBA,EAAA,SAxBA,uBAwBA;AACA,SAAA,OAAA;AACA,SAAA,eAAA;AACA,GA3BA;AA4BA,EAAA,OAAA,EAAA;AACA;AACA,IAAA,OAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA,gBAAA,OAAA,CAAA,GAAA,CAAA,KAAA,KAAA;AACA,gBAAA,KAJA,GAIA,EAJA;AAKA,gBAAA,MAAA,CAAA,MAAA,CAAA,KAAA,EAAA,IAAA,CAAA,KAAA;AALA;AAAA,uBAMA,OAAA,CAAA,SAAA,CAAA,KAAA,CANA;;AAAA;AAMA,gBAAA,KANA;AAOA,qBAAA,SAAA,GAAA,KAAA,CAAA,KAAA,CAAA,IAAA;AACA,qBAAA,SAAA,GAAA,KAAA,CAAA,KAAA,CAAA,KAAA;;AARA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAUA,IAAA,eAVA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAWA,OAAA,CAAA,iBAAA,EAXA;;AAAA;AAWA,gBAAA,KAXA;AAYA,qBAAA,WAAA,GAAA,KAAA,CAAA,KAAA;;AAZA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAcA,IAAA,WAdA,uBAcA,WAdA,EAcA,EAdA,EAcA;AAEA,UAAA,WAAA,GAAA,KAAA,WAAA;AACA,UAAA,OAAA,GAAA,WAAA,GAAA,WAAA,CAAA,MAAA,CAAA,KAAA,YAAA,CAAA,WAAA,CAAA,CAAA,GAAA,WAAA,CAHA,CAIA;;AACA,MAAA,EAAA,CAAA,OAAA,CAAA;AACA,KApBA;AAqBA,IAAA,YArBA,wBAqBA,WArBA,EAqBA;AACA,aAAA,UAAA,UAAA,EAAA;AACA,eAAA,UAAA,CAAA,IAAA,CAAA,WAAA,GAAA,OAAA,CAAA,WAAA,CAAA,WAAA,EAAA,KAAA,CAAA,CAAA;AACA,OAFA;AAGA,KAzBA;AA0BA,IAAA,YA1BA,wBA0BA,IA1BA,EA0BA;AACA,WAAA,OAAA;AACA,KA5BA;AA6BA;AACA,IAAA,YA9BA,0BA8BA;AACA,WAAA,IAAA,CAAA,KAAA,KAAA,EAAA,WAAA,EAAA,CAAA;AACA,WAAA,OAAA;AACA,KAjCA;AAkCA;AACA,IAAA,YAnCA,wBAmCA,KAnCA,EAmCA,GAnCA,EAmCA;AACA;AACA,WAAA,QAAA,CAAA,SAAA,EAAA,IAAA,EAAA;AACA,QAAA,IAAA,EAAA;AADA,OAAA,EAGA,IAHA;AAAA;AAAA;AAAA;AAAA,8BAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACA,OAAA,CAAA,GAAA,CAAA,GAAA,CAAA,EAAA,CADA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAHA,IAQA,KARA,CAQA,YAAA,CAAA,CARA;AASA,KA9CA;AA+CA;AACA,IAAA,qBAhDA,iCAgDA,GAhDA,EAgDA;AACA,WAAA,iBAAA,GAAA,GAAA;AACA,KAlDA;AAmDA,IAAA,eAnDA,6BAmDA;AACA,UAAA,MAAA,GAAA,KAAA,iBAAA,CAAA,MAAA;AACA,UAAA,GAAA,GAAA,EAAA;AACA,WAAA,OAAA,GAAA,KAAA,OAAA,CAAA,MAAA,CAAA,KAAA,iBAAA,CAAA;;AACA,WAAA,IAAA,CAAA,GAAA,CAAA,EAAA,CAAA,GAAA,MAAA,EAAA,CAAA,EAAA,EAAA;AACA,QAAA,GAAA,IAAA,KAAA,iBAAA,CAAA,CAAA,EAAA,IAAA,GAAA,GAAA;AACA;;AACA,WAAA,QAAA,CAAA,KAAA,6BAAA,GAAA;AACA,WAAA,iBAAA,GAAA,EAAA;AACA,KA5DA;AA6DA;AACA,IAAA,UA9DA,sBA8DA,KA9DA,EA8DA,GA9DA,EA8DA;AACA;AACA;AAEA;AACA,WAAA,OAAA,CAAA,IAAA,CAAA;AAAA,QAAA,IAAA,EAAA,eAAA;AAAA,QAAA,KAAA,EAAA;AAAA,UAAA,EAAA,EAAA,GAAA,CAAA;AAAA;AAAA,OAAA;AACA,KApEA;AAqEA;AACA,IAAA,QAtEA,sBAsEA;AACA,WAAA,WAAA,GAAA,KAAA;AACA,WAAA,QAAA,CAAA,OAAA,8BAAA,KAAA,GAAA,GAAA,CAAA;AACA,WAAA,IAAA,CAAA,KAAA,SAAA,EAAA,KAAA,GAAA,EAAA,KAAA,IAAA;AACA,KA1EA;AA2EA;AACA,IAAA,gBA5EA,4BA4EA,GA5EA,EA4EA;AACA,WAAA,IAAA,CAAA,KAAA,KAAA,EAAA,WAAA,EAAA,GAAA;AACA,WAAA,OAAA;AACA;AA/EA;AA5BA,CAAA","sourcesContent":["<template>\n    <div>\n        <div class=\"crumbs\">\n            <el-breadcrumb separator=\"/\">\n                <el-breadcrumb-item>\n                    <i class=\"el-icon-lx-cascades\"></i> 基础表格\n                </el-breadcrumb-item>\n            </el-breadcrumb>\n        </div>\n        <div class=\"container\">\n            <div class=\"handle-box\">\n                <el-button\n                    type=\"primary\"\n                    icon=\"el-icon-delete\"\n                    class=\"handle-del mr10\"\n                    @click=\"delAllSelection\"\n                >批量删除</el-button>\n                 <el-input v-model=\"query.title\" placeholder=\"请输入文章标题\" class=\"handle-input mr10\"></el-input>\n                    <el-autocomplete\n                    v-model=\"query.category\"\n                    :fetch-suggestions=\"querySearch\"\n                    placeholder=\"请输入文章分类\"\n                    valueKey=\"name\"\n                    @select=\"handleSelect\"\n                 ></el-autocomplete>\n               \n                <el-button type=\"primary\" icon=\"el-icon-search\" @click=\"handleSearch\">搜索</el-button>\n                <el-button @click=\"$router.push('/article-add')\"> 添加文章 </el-button>\n            </div>\n            <el-table\n                :data=\"tableData\"\n                border\n                class=\"table\"\n                ref=\"multipleTable\"\n                header-cell-class-name=\"table-header\"\n                @selection-change=\"handleSelectionChange\"\n            >\n               <el-table-column type=\"selection\" width=\"55\" align=\"center\"></el-table-column>\n                 <el-table-column  prop=\"id\" label=\"ID\" width=\"55\" align=\"center\"></el-table-column>\n                 <el-table-column  prop=\"title\" label=\"文章标题\" align=\"center\"></el-table-column>\n                 <el-table-column  prop=\"category\" label=\"文章分类\" align=\"center\"></el-table-column>\n            \n              <!--    <el-table-column prop=\"id\" label=\"ID\" width=\"55\" align=\"center\"></el-table-column>\n                <el-table-column prop=\"name\" label=\"用户名\"></el-table-column>\n                <el-table-column label=\"账户余额\">\n                    <template slot-scope=\"scope\">￥{{scope.row.money}}</template>\n                </el-table-column>\n                <el-table-column label=\"头像(查看大图)\" align=\"center\">\n                    <template slot-scope=\"scope\">\n                        <el-image\n                            class=\"table-td-thumb\"\n                            :src=\"scope.row.thumb\"\n                            :preview-src-list=\"[scope.row.thumb]\"\n                        ></el-image>\n                    </template>\n                </el-table-column>\n                <el-table-column prop=\"address\" label=\"地址\"></el-table-column>\n                <el-table-column label=\"状态\" align=\"center\">\n                    <template slot-scope=\"scope\">\n                        <el-tag\n                            :type=\"scope.row.state==='成功'?'success':(scope.row.state==='失败'?'danger':'')\"\n                        >{{scope.row.state}}</el-tag>\n                    </template>\n                </el-table-column>\n\n                <el-table-column prop=\"date\" label=\"注册时间\"></el-table-column>-->\n                <el-table-column label=\"操作\" width=\"180\" align=\"center\">\n                    <template slot-scope=\"scope\">\n                        <el-button\n                            type=\"text\"\n                            icon=\"el-icon-edit\"\n                            @click=\"handleEdit(scope.$index, scope.row)\"\n                        >编辑</el-button>\n                        <el-button\n                            type=\"text\"\n                            icon=\"el-icon-delete\"\n                            class=\"red\"\n                            @click=\"handleDelete(scope.$index, scope.row)\"\n                        >删除</el-button>\n                    </template>\n                </el-table-column> \n            </el-table>\n            <div class=\"pagination\">\n                <el-pagination\n                    background\n                    layout=\"total, prev, pager, next\"\n                    :current-page=\"query.pageIndex\"\n                    :page-size=\"query.pageSize\"\n                    :total=\"pageTotal\"\n                    @current-change=\"handlePageChange\"\n                ></el-pagination>\n            </div>\n        </div>\n\n        <!-- 编辑弹出框 -->\n        <el-dialog title=\"编辑\" :visible.sync=\"editVisible\" width=\"30%\">\n            <el-form ref=\"form\" :model=\"form\" label-width=\"70px\">\n                <el-form-item label=\"用户名\">\n                    <el-input v-model=\"form.name\"></el-input>\n                </el-form-item>\n                <el-form-item label=\"地址\">\n                    <el-input v-model=\"form.address\"></el-input>\n                </el-form-item>\n            </el-form>\n            <span slot=\"footer\" class=\"dialog-footer\">\n                <el-button @click=\"editVisible = false\">取 消</el-button>\n                <el-button type=\"primary\" @click=\"saveEdit\">确 定</el-button>\n            </span>\n        </el-dialog>\n    </div>\n</template>\n\n<script>\nimport { fetchData } from '../../api/index';\nimport article from './article'\nexport default {\n    name: 'basetable',\n    data() {\n        return {\n            query: {\n                title:'',\n                name: '',\n                pageIndex: 1,\n                pageSize: 10\n            },\n            tableData: [],\n            multipleSelection: [],\n            delList: [],\n            editVisible: false,\n            pageTotal: 0,\n            form: {},\n            idx: -1,\n            id: -1\n        };\n    },\n    created() {\n        this.getData();\n          this.getCategoryDate()\n    },\n    activated(){\n       this.getData();\n       this.getCategoryDate()\n    },\n    methods: {\n        // 获取 easy-mock 的模拟数据\n        async getData() {\n         console.log(this.query)\n         let query={};\n         Object.assign(query,THIS.query)\n         let datas=await article.queryList(query)\n         this.tableData=datas.datas.rows;\n         this.pageTotal=datas.datas.count;\n        },\n       async getCategoryDate(){\n            let datas=await article.queryCategoryList();\n            this.restaurants=datas.datas;\n       },\n     querySearch(queryString, cb) {\n\n        var restaurants = this.restaurants;\n        var results = queryString ? restaurants.filter(this.createFilter(queryString)) : restaurants;\n        // 调用 callback 返回建议列表的数据\n        cb(results);\n      },\n      createFilter(queryString) {\n        return (restaurant) => {\n          return (restaurant.name.toLowerCase().indexOf(queryString.toLowerCase()) !=-1);\n        };\n      },\n        handleSelect(item){\n              this.getData();\n        },\n        // 触发搜索按钮\n        handleSearch() {\n            this.$set(this.query, 'pageIndex', 1);\n            this.getData();\n        },\n        // 删除操作\n        handleDelete(index, row) {\n            // 二次确认删除\n            this.$confirm('确定要删除吗？', '提示', {\n                type: 'warning'\n            })\n                .then(async () => {\n                    await article.del(row.id)\n                    // this.$message.success('删除成功');\n                    // this.tableData.splice(index, 1);\n                })\n                .catch(() => {});\n        },\n        // 多选操作\n        handleSelectionChange(val) {\n            this.multipleSelection = val;\n        },\n        delAllSelection() {\n            const length = this.multipleSelection.length;\n            let str = '';\n            this.delList = this.delList.concat(this.multipleSelection);\n            for (let i = 0; i < length; i++) {\n                str += this.multipleSelection[i].name + ' ';\n            }\n            this.$message.error(`删除了${str}`);\n            this.multipleSelection = [];\n        },\n        // 编辑操作\n        handleEdit(index, row) {\n          //  this.idx = index;\n        //    this.form = row;\n\n        //  this.editVisible = true;\n            this.$router.push({path:'/article-edit',query:{id:row.id}})\n        },\n        // 保存编辑\n        saveEdit() {\n            this.editVisible = false;\n            this.$message.success(`修改第 ${this.idx + 1} 行成功`);\n            this.$set(this.tableData, this.idx, this.form);\n        },\n        // 分页导航\n        handlePageChange(val) {\n            this.$set(this.query, 'pageIndex', val);\n            this.getData();\n        }\n    }\n};\n</script>\n\n<style scoped>\n.handle-box {\n    margin-bottom: 20px;\n}\n\n.handle-select {\n    width: 120px;\n}\n\n.handle-input {\n    width: 300px;\n    display: inline-block;\n}\n.table {\n    width: 100%;\n    font-size: 14px;\n}\n.red {\n    color: #ff0000;\n}\n.mr10 {\n    margin-right: 10px;\n}\n\n.table-td-thumb {\n    display: block;\n    margin: auto;\n    width: 40px;\n    height: 40px;\n}\n</style>\n"],"sourceRoot":"src/components/page"}]}